<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta content="width=device-width, initial-scale=1.0" name="viewport" />

    <title>Food Vault</title>
    <meta content="" name="description" />
    <meta content="" name="keywords" />

    <!-- The core Firebase JS SDK is always required and must be listed first -->
    <script type="module" src="https://www.gstatic.com/firebasejs/9.1.2/firebase-app.js"></script>
    <!-- This is the API from Firebase Realtime Database -->
    <script type="module" src="https://www.gstatic.com/firebasejs/9.1.2/firebase-database.js"></script>


    <!-- Favicons -->
    <link href="./assets/img/Logo/bar-icon.jpg" sizes="32x32" rel="icon" />



    <!-- Google Fonts -->
    <link
        href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i"
        rel="stylesheet" />

    <!-- Vendor CSS Files -->
    <link href="assets/vendor/aos/aos.css" rel="stylesheet" />
    <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet" />
    <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet" />
    <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet" />
    <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet" />
    <link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet" />
    <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet" />

    <!-- Template Main CSS File -->
    <link href="assets/css/style.css" rel="stylesheet" />


</head>

<body onload="retrieve()">
    <!-- ======= Header ======= -->
    <header id="header" class="fixed-top d-flex align-items-center">
        <div class="container d-flex align-items-center justify-content-between">
            <div class="logo">
                <h1><a href="foodvault_intro.html">Food Vault</a></h1>
                <!-- Uncomment below if you prefer to use an image logo -->
                <!-- <a href="index.html"><img src="assets/img/logo.png" alt="" class="img-fluid"></a>-->
            </div>
            <nav id="navbar" class="navbar">
                <ul>
                    <li><a class="nav-link  " href="foodvault_intro.html">Home</a></li>
                    <li><a class="nav-link " href="foodvault_intro.html#about">About</a></li>
                    <li><a class="nav-link " href="foodvault_intro.html#services">Services</a></li>
                    <li><a class="nav-link " href="foodvault_intro.html#team">Team</a></li>
                    <li><a class="nav-link " href="foodvault_intro.html#faq">FAQ</a></li>
                    <li><a class="nav-link " href="learn.html">Learn</a></li>
                    <li><a class="nav-link active " href="#">Sign up</a></li>
                    <li><a class="nav-link" href="signin.html">Sign in</a></li>
                </ul>
            </nav>
            <!-- .navbar -->
        </div>
    </header>
    <!-- End Header -->
    <!-- ======= First Section ======= -->
    <section id="home" class="d-flex align-items-center" style="height: fit-content;">

        <script type="module">
            import { initializeApp } from "https://www.gstatic.com/firebasejs/9.1.2/firebase-app.js";
            import { getDatabase,ref,set,get,child } from " https://www.gstatic.com/firebasejs/9.1.2/firebase-database.js";
            const firebaseConfig = {
               apiKey: "AIzaSyDKC3yvnonrxiGALVjDktGoS_t8y5adUJk",
               authDomain: "foodvault-6d35a.firebaseapp.com",
               databaseURL: "https://foodvault-6d35a-default-rtdb.asia-southeast1.firebasedatabase.app",
               projectId: "foodvault-6d35a",
               storageBucket: "foodvault-6d35a.appspot.com",
               messagingSenderId: "863157964884",
               appId: "1:863157964884:web:02b343ccf7a6d780459dc1",
               measurementId: "G-S687X22CVW"
             };
           
            const app = initializeApp(firebaseConfig);
            const database = getDatabase(app);

            function unescape(htmlStr) {
                //console.log(htmlStr);
                return htmlStr.replace(/ysand/g, "&")
                    .replace(/yslt/g, "<")
                    .replace(/ysgt/g, ">") 
                    .replace(/ysquot/g, '"')
                    .replace(/ys39/g, "'")
                    .replace(/yshash/g, "#")
                    .replace(new RegExp('\\ysdollar', 'g'), '$')
                    .replace(new RegExp('\\ysleft', 'g'), '[')
                    .replace(new RegExp('\\ysright', 'g'), ']')
                    .replace(new RegExp('\\ysdot', 'g'), '.')
                    .replace(new RegExp('\\ysslsh', 'g'), '/')
            }

            window.retrieve = function retrieve() { //retrieve all
            //add window.function to access
            const dbRef = ref(getDatabase());
            get(child(dbRef, `merchants`)) 
                .then((snapshot) => {
                    if (snapshot.exists()) {
                        snapshot.forEach(function(childSnapshot) {
                        var key = childSnapshot.key;
                        var childData = childSnapshot.val();
                        console.log(childData);

                        var merchantName= childData.merchant.split("@")[0];
                        merchantName = unescape(merchantName);
                        document.getElementById("card-header").innerHTML = merchantName;

                        var description = childData.description;
                        description = unescape(description);
                        document.getElementById("card-description").innerHTML = description;

                        var imageurl = childData.imageurl;
                        imageurl = unescape(imageurl);
                        console.log(imageurl);
                        document.getElementById("card-image").src = imageurl;
                        
                    })
                    } else {
                        console.log("No data available");
                    }
                })
                .catch((error) => {
                console.error(error);
            });
        };
        </script>

        <body class="align">
            <div class="container-fluid">
                <div class=" px-5 py-4 m-auto">

                    <div class="album py-5 bg-light">
                        <div class="container">

                            <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3">
                                <div class="col">
                                    <div class="card shadow-sm" style="height: 500px;">

                                        <img id = "card-image" style="max-width: 100%; height: 280px;"
                                            src="" alt="">

                                        <div class="card-body">
                                            <p id="card-header" style="font-weight: bold;"></p>
                                            <p id="card-description"></p>
                                            <div class="d-flex justify-content-between align-items-center">
                                                <div class="btn-group" style="position:absolute; bottom:10px;">
                                                    <button type="button" class="btn btn-sm btn-outline-secondary"
                                                        onclick="location.href='individual_merchant.html'">View</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col">
                                    <div class="card shadow-sm" style="height: 100%;">

                                        <img style="max-width: 100%; height: 280px;"
                                            src="https://www.breadtalk.com.sg/wp-content/uploads/2020/03/BT_Apple-Worm_Website_450x450.jpg"
                                            alt="">

                                        <div class="card-body">
                                            <p class="card-text"><b>Breadtalk</b> - A bread selling place located at
                                                Breadtalk IHQ with excellent finger food and top-notch service!</p>
                                            <div class="d-flex justify-content-between align-items-center">
                                                <div class="btn-group" style="position:absolute; bottom:10px;">
                                                    <button type="button" class="btn btn-sm btn-outline-secondary"
                                                        onclick="location.href='individual_merchant.html'">View</button>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col">
                                    <div class="card shadow-sm">
                                        <img style=" max-width: 100%; height: 280px;"
                                            src="https://interactive-examples.mdn.mozilla.net/media/cc0-images/grapefruit-slice-332-332.jpg">

                                        <div class="card-body">
                                            <p class="card-text">This is a wider card with supporting text below as a
                                                natural lead-in to additional content. This content is a little bit
                                                longer.</p>
                                            <div class="d-flex justify-content-between align-items-center">
                                                <div class="btn-group">
                                                    <button type="button"
                                                        class="btn btn-sm btn-outline-secondary">View</button>
                                                </div>
                                                <small class="text-muted">Bread</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col">
                                    <div class="card shadow-sm">
                                        <svg class="bd-placeholder-img card-img-top" width="100%" height="225">
                                            <rect width="100%" height="100%" fill="#55595c" /><text x="50%" y="50%"
                                                fill="#eceeef" dy=".3em">Breadtalk</text>
                                        </svg>

                                        <div class="card-body">
                                            <p class="card-text">This is a wider card with supporting text below as a
                                                natural lead-in to additional content. This content is a little bit
                                                longer.</p>
                                            <div class="d-flex justify-content-between align-items-center">
                                                <div class="btn-group">
                                                    <button type="button"
                                                        class="btn btn-sm btn-outline-secondary">View</button>
                                                </div>
                                                <small class="text-muted">Bread</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col">
                                    <div class="card shadow-sm">
                                        <svg class="bd-placeholder-img card-img-top" width="100%" height="225">
                                            <rect width="100%" height="100%" fill="#55595c" /><text x="50%" y="50%"
                                                fill="#eceeef" dy=".3em">Breadtalk</text>
                                        </svg>

                                        <div class="card-body">
                                            <p class="card-text">This is a wider card with supporting text below as a
                                                natural lead-in to additional content. This content is a little bit
                                                longer.</p>
                                            <div class="d-flex justify-content-between align-items-center">
                                                <div class="btn-group">
                                                    <button type="button"
                                                        class="btn btn-sm btn-outline-secondary">View</button>
                                                </div>
                                                <small class="text-muted">Bread</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col">
                                    <div class="card shadow-sm">
                                        <svg class="bd-placeholder-img card-img-top" width="100%" height="225">
                                            <rect width="100%" height="100%" fill="#55595c" /><text x="50%" y="50%"
                                                fill="#eceeef" dy=".3em">Breadtalk</text>
                                        </svg>

                                        <div class="card-body">
                                            <p class="card-text">This is a wider card with supporting text below as a
                                                natural lead-in to additional content. This content is a little bit
                                                longer.</p>
                                            <div class="d-flex justify-content-between align-items-center">
                                                <div class="btn-group">
                                                    <button type="button"
                                                        class="btn btn-sm btn-outline-secondary">View</button>
                                                </div>
                                                <small class="text-muted">Bread</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col">
                                    <div class="card shadow-sm">
                                        <svg class="bd-placeholder-img card-img-top" width="100%" height="225">
                                            <rect width="100%" height="100%" fill="#55595c" /><text x="50%" y="50%"
                                                fill="#eceeef" dy=".3em">Breadtalk</text>
                                        </svg>

                                        <div class="card-body">
                                            <p class="card-text">This is a wider card with supporting text below as a
                                                natural lead-in to additional content. This content is a little bit
                                                longer.</p>
                                            <div class="d-flex justify-content-between align-items-center">
                                                <div class="btn-group">
                                                    <button type="button"
                                                        class="btn btn-sm btn-outline-secondary">View</button>
                                                </div>
                                                <small class="text-muted">Bread</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col">
                                    <div class="card shadow-sm">
                                        <svg class="bd-placeholder-img card-img-top" width="100%" height="225">
                                            <rect width="100%" height="100%" fill="#55595c" /><text x="50%" y="50%"
                                                fill="#eceeef" dy=".3em">Breadtalk</text>
                                        </svg>

                                        <div class="card-body">
                                            <p class="card-text">This is a wider card with supporting text below as a
                                                natural lead-in to additional content. This content is a little bit
                                                longer.</p>
                                            <div class="d-flex justify-content-between align-items-center">
                                                <div class="btn-group">
                                                    <button type="button"
                                                        class="btn btn-sm btn-outline-secondary">View</button>
                                                </div>
                                                <small class="text-muted">Bread</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col">
                                    <div class="card shadow-sm">
                                        <svg class="bd-placeholder-img card-img-top" width="100%" height="225">
                                            <rect width="100%" height="100%" fill="#55595c" /><text x="50%" y="50%"
                                                fill="#eceeef" dy=".3em">Breadtalk</text>
                                        </svg>

                                        <div class="card-body">
                                            <p class="card-text">This is a wider card with supporting text below as a
                                                natural lead-in to additional content. This content is a little bit
                                                longer.</p>
                                            <div class="d-flex justify-content-between align-items-center">
                                                <div class="btn-group">
                                                    <button type="button"
                                                        class="btn btn-sm btn-outline-secondary">View</button>
                                                </div>
                                                <small class="text-muted">Bread</small>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </body>
        </div>
    </section>

    <!-- End First Section -->
    <main id="main">
        <!-- ======= Special Thanks and Footer Section ======= -->
        <section id="clients" class="clients clients">
            <div class="container">
                <br />
                <h3>Special Thanks to :</h3>
                <div class="row my-4">
                    <div class="col-lg-4 col-md-4 col-4">
                        <img style="height: auto" title="SMU" src="assets/img/footer/SMU.png" class="img-fluid" alt=""
                            data-aos="zoom-in" />
                    </div>
                    <div class="col-lg-4 my-auto col-md-4 col-4">
                        <img src="assets/img/footer/SCIS.webp" class="img-fluid" alt="" data-aos="zoom-in"
                            data-aos-delay="300" />
                    </div>

                    <div class="col-lg-4 my-auto col-md-4 col-4">
                        <img src="assets/img/footer/prof.png" class="img-fluid" alt="" data-aos="zoom-in"
                            data-aos-delay="100" />
                    </div>
                </div>
            </div>
            <br />
            &copy; Copyright <strong>Food Vault </strong>. All Rights Reserved
            <br />
            <br />
        </section>
        <!-- Special Thanks and Footer Section -->
    </main>
    <!-- End #main -->

    <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i
            class="bi bi-arrow-up-short"></i></a>

    <!-- Vendor JS Files -->
    <script src="assets/vendor/aos/aos.js"></script>
    <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
    <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
    <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
    <script src="assets/vendor/purecounter/purecounter.js"></script>
    <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>

    <!-- Template Main JS File -->
    <script src="assets/js/main.js"></script>




</body>

</html>